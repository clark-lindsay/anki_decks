<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">users</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="4529257959-1">%{</span><span class="s">"melany"</span><span class="w"> </span><span class="o">=</span><span class="o">&gt;</span><span class="w"> </span><span class="s">"guest"</span><span class="p">,</span><span class="w"> </span><span class="s">"bob"</span><span class="w"> </span><span class="o">=</span><span class="o">&gt;</span><span class="w"> </span><span class="ss">:admin</span><span class="p" data-group-id="4529257959-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="k">with</span><span class="w"> </span><span class="p" data-group-id="4529257959-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">role</span><span class="p" data-group-id="4529257959-2">}</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">is_binary</span><span class="p" data-group-id="4529257959-3">(</span><span class="n">role</span><span class="p" data-group-id="4529257959-3">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">fetch</span><span class="p" data-group-id="4529257959-4">(</span><span class="n">users</span><span class="p">,</span><span class="w"> </span><span class="s">"bob"</span><span class="p" data-group-id="4529257959-4">)</span><span class="w"> </span><span class="k" data-group-id="4529257959-5">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="4529257959-6">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">to_string</span><span class="p" data-group-id="4529257959-7">(</span><span class="n">role</span><span class="p" data-group-id="4529257959-7">)</span><span class="p" data-group-id="4529257959-6">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="4529257959-5">end</span><span class="w">
</span>{{c1::<span class="p" data-group-id="4529257959-8">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">"admin"</span><span class="p" data-group-id="4529257959-8">}</span>}}<br></code></pre>

